version: '2.0'

panic_room.watch_twitter:
    description: >
        A sample workflow that demonstrates how to use conditions
        to determine which path in the workflow to take.
    type: direct
    input:
        - user
        - tweet
    tasks:
        analyse:
            action: panic_room.sentiment
            input:
                sentence: "<% $.tweet %>"
            publish:
                sentiment: <% task(analyse).result.result %>
            on-success:
                - good: <% $.sentiment > 0.2 %>
        good:
            action: core.local
            input:
                cmd: "echo '<% $.tweet %>'"
